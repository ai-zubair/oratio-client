(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{112:function(e,t){},114:function(e,t){},125:function(e,t,a){},126:function(e,t,a){},128:function(e,t,a){e.exports=a.p+"static/media/share.e7b143c0.svg"},129:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(44),l=a.n(r),o=(a(62),a(2)),i=a(45),s=a.n(i),u=a(20),m=a.n(u),d=a(46),f=a(48),p=(a(125),function(){return c.a.createElement("header",{className:"dropShadow"},c.a.createElement("div",{className:"headerWrapper"},c.a.createElement("div",{className:"headerContainer flex"},c.a.createElement("div",{className:"headerLogoLinkWrapper"},c.a.createElement("div",{className:"headerLogoLink"},c.a.createElement("a",{href:"/"},c.a.createElement("div",{className:"headerLogo flex flex-row"},c.a.createElement("div",{className:"logoText"},"Oratio"))))))))});a(126);var g=function(){return c.a.createElement("footer",{className:"footerWrapper"},c.a.createElement("div",{className:"footerContainer"},c.a.createElement("div",{className:"disclaimer"},"You need to allow access to video and audio to place calls.",c.a.createElement("br",null),"Oratio is an Open Source initiative and does not store/share any data on."),c.a.createElement("div",{className:"self"},"Made with ",c.a.createElement("span",{role:"img","aria-label":"heart-emoji"},"\u2764\ufe0f")," ",c.a.createElement("br",null),"@ National Institute of Technology, Srinagar.")))},E=(a(127),a(49)),v=a.n(E),b=a(50),h=a.n(b),O=a(51),j=a.n(O),N=a(52),C=a.n(N),w=(a(128),a(53)),x=a.n(w),y=a(54),k=a.n(y),S=a(55),T=a.n(S),I=a(56),P=a.n(I),R=new f.Howl({src:[P.a],loop:!0,preload:!0});var V=function(){var e,t,a,r,l,i=Object(n.useState)(""),u=Object(o.a)(i,2),f=u[0],E=u[1],b=Object(n.useState)({}),O=Object(o.a)(b,2),N=O[0],w=O[1],y=Object(n.useState)(),S=Object(o.a)(y,2),I=S[0],P=S[1],V=Object(n.useState)(!1),A=Object(o.a)(V,2),L=A[0],B=A[1],D=Object(n.useState)(""),W=Object(o.a)(D,2),M=W[0],U=W[1],Y=Object(n.useState)(!1),J=Object(o.a)(Y,2),F=J[0],z=J[1],G=Object(n.useState)(),Q=Object(o.a)(G,2),Z=Q[0],H=Q[1],q=Object(n.useState)(!1),K=Object(o.a)(q,2),X=K[0],$=K[1],_=Object(n.useState)(!1),ee=Object(o.a)(_,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(""),ce=Object(o.a)(ne,2),re=ce[0],le=ce[1],oe=Object(n.useState)(!1),ie=Object(o.a)(oe,2),se=ie[0],ue=ie[1],me=Object(n.useState)(""),de=Object(o.a)(me,2),fe=de[0],pe=de[1],ge=Object(n.useState)(!1),Ee=Object(o.a)(ge,2),ve=Ee[0],be=Ee[1],he=Object(n.useState)(!1),Oe=Object(o.a)(he,2),je=Oe[0],Ne=Oe[1],Ce=Object(n.useState)(!1),we=Object(o.a)(Ce,2),xe=we[0],ye=we[1],ke=Object(n.useState)(!1),Se=Object(o.a)(ke,2),Te=Se[0],Ie=Se[1],Pe=Object(n.useRef)(),Re=Object(n.useRef)(),Ve=Object(n.useRef)(),Ae=Object(n.useRef)(),Le=c.a.createElement(c.a.Fragment,null,c.a.createElement(p,null),c.a.createElement("main",null,c.a.createElement("div",{className:"u-margin-top-xxlarge u-margin-bottom-xxlarge"},c.a.createElement("div",{className:"o-wrapper-l"},c.a.createElement("div",{className:"hero flex flex-column"},c.a.createElement("div",null,c.a.createElement("div",{className:"welcomeText"},"Anonymous Video Calls"),c.a.createElement("div",{className:"descriptionText"},"across the world for free")),c.a.createElement("div",null,c.a.createElement("div",{className:"actionText"},"Who do you want to call, ",c.a.createElement("span",{className:Te?"username highlight copied":"username highlight",onClick:function(){navigator.clipboard.writeText(f),Ie(!0),setInterval((function(){Ie(!1)}),1e3)}},f),"?")),c.a.createElement("div",{className:"callBox flex"},c.a.createElement("input",{type:"text",placeholder:"Friend ID",value:re,onChange:function(e){return le(e.target.value)},className:"form-input"}),c.a.createElement("button",{onClick:function(){return function(e){if(""===e||!N[e]||e===f)return pe("We think the username entered is wrong. Please check again and retry!"),void ue(!0);navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(t){P(t),z(!0),U(e),Pe.current&&(Pe.current.srcObject=t);var a=new m.a({initiator:!0,trickle:!1,config:{iceServers:[{url:"stun:stun01.sipphone.com"},{url:"stun:stun.ekiga.net"},{url:"stun:stun.fwdnet.net"},{url:"stun:stun.ideasip.com"},{url:"stun:stun.iptel.org"},{url:"stun:stun.rixtelecom.se"},{url:"stun:stun.schlund.de"},{url:"stun:stun.l.google.com:19302"},{url:"stun:stun1.l.google.com:19302"},{url:"stun:stun2.l.google.com:19302"},{url:"stun:stun3.l.google.com:19302"},{url:"stun:stun4.l.google.com:19302"},{url:"stun:stunserver.org"},{url:"stun:stun.softjoys.com"},{url:"stun:stun.voiparound.com"},{url:"stun:stun.voipbuster.com"},{url:"stun:stun.voipstunt.com"},{url:"stun:stun.voxgratia.org"},{url:"stun:stun.xten.com"},{url:"turn:numb.viagenie.ca",credential:"muazkh",username:"webrtc@live.com"},{url:"turn:192.158.29.39:3478?transport=udp",credential:"JZEOEt2V3Qb0y27GRntt2u2PAYA=",username:"28224511:1379330808"},{url:"turn:192.158.29.39:3478?transport=tcp",credential:"JZEOEt2V3Qb0y27GRntt2u2PAYA=",username:"28224511:1379330808"}]},stream:t});Ae.current=a,a.on("signal",(function(t){Ve.current.emit("callUser",{userToCall:e,signalData:t,from:f})})),a.on("stream",(function(e){Re.current&&(Re.current.srcObject=e)})),a.on("error",(function(e){Be()})),Ve.current.on("callAccepted",(function(e){$(!0),a.signal(e)})),Ve.current.on("close",(function(){window.location.reload()})),Ve.current.on("rejected",(function(){window.location.reload()}))})).catch((function(){pe("You cannot place/ receive a call without granting video and audio permissions! Please change your settings to use Oratio."),ue(!0)}))}(re.toLowerCase().trim())},className:"primaryButton"},"Call")),c.a.createElement("div",null,"To call your friend, ask them to open Oratio in their browser. ",c.a.createElement("br",null),"Send your username (",c.a.createElement("span",{className:"username"},f),") and wait for their call ",c.a.createElement("span",{style:{fontWeight:600}},"OR")," enter their username and hit call!"))))),c.a.createElement(g,null));function Be(){Ae.current.destroy(),Ve.current.emit("close",{to:M}),window.location.reload()}function De(){I&&(be(!ve),I.getAudioTracks()[0].enabled=ve)}function We(){I&&(Ne(!je),I.getVideoTracks()[0].enabled=je)}Object(n.useEffect)((function(){Ve.current=s.a.connect("/"),Ve.current.on("yourID",(function(e){E(e)})),Ve.current.on("allUsers",(function(e){w(e)})),Ve.current.on("hey",(function(e){B(!0),R.play(),U(e.from),H(e.signal)}))}),[]),I&&(e=c.a.createElement("video",{className:"userVideo",playsInline:!0,muted:!0,ref:Pe,autoPlay:!0})),X&&xe?t=c.a.createElement("video",{className:"partnerVideo cover",playsInline:!0,ref:Re,autoPlay:!0}):X&&!xe&&(t=c.a.createElement("video",{className:"partnerVideo",playsInline:!0,ref:Re,autoPlay:!0})),!L||X||te||(a=c.a.createElement("div",{className:"incomingCallContainer"},c.a.createElement("div",{className:"incomingCall flex flex-column"},c.a.createElement("div",null,c.a.createElement("span",{className:"callerID"},M)," is calling you!"),c.a.createElement("div",{className:"incomingCallButtons flex"},c.a.createElement("button",{name:"accept",className:"alertButtonPrimary",onClick:function(){return R.unload(),void navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){P(e),Pe.current&&(Pe.current.srcObject=e),$(!0);var t=new m.a({initiator:!1,trickle:!1,stream:e});Ae.current=t,t.on("signal",(function(e){Ve.current.emit("acceptCall",{signal:e,to:M})})),t.on("stream",(function(e){Re.current.srcObject=e})),t.on("error",(function(e){Be()})),t.signal(Z),Ve.current.on("close",(function(){window.location.reload()}))})).catch((function(){pe("You cannot place/ receive a call without granting video and audio permissions! Please change your settings to use Oratio."),ue(!0)}))}},"Accept"),c.a.createElement("button",{name:"reject",className:"alertButtonSecondary",onClick:function(){return R.unload(),ae(!0),Ve.current.emit("rejected",{to:M}),void window.location.reload()}},"Reject"))))),r=ve?c.a.createElement("span",{className:"iconContainer",onClick:function(){return De()}},c.a.createElement("img",{src:C.a,alt:"Unmute audio"})):c.a.createElement("span",{className:"iconContainer",onClick:function(){return De()}},c.a.createElement("img",{src:j.a,alt:"Mute audio"})),l=je?c.a.createElement("span",{className:"iconContainer",onClick:function(){return We()}},c.a.createElement("img",{src:h.a,alt:"Resume video"})):c.a.createElement("span",{className:"iconContainer",onClick:function(){return We()}},c.a.createElement("img",{src:v.a,alt:"Stop audio"}));var Me,Ue=c.a.createElement("span",{className:"iconContainer",onClick:function(){return Be()}},c.a.createElement("img",{src:x.a,alt:"End call"}));return Me=xe?c.a.createElement("span",{className:"iconContainer",onClick:function(){ye(!1)}},c.a.createElement("img",{src:T.a,alt:"fullscreen"})):c.a.createElement("span",{className:"iconContainer",onClick:function(){ye(!0)}},c.a.createElement("img",{src:k.a,alt:"fullscreen"})),c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{style:{display:te||X||F?"none":"block"}},Le,c.a.createElement(d.a,{visible:se,onClose:function(){return ue(!1)},width:20,height:5,measure:"em",closeOnEsc:!0},c.a.createElement("div",null,fe)),a),c.a.createElement("div",{className:"callContainer",style:{display:te||X||F?"block":"none"}},c.a.createElement(n.Suspense,{fallback:c.a.createElement("div",null,"Loading...")}),c.a.createElement("div",{className:"partnerVideoContainer"},t),c.a.createElement("div",{className:"userVideoContainer"},e),c.a.createElement("div",{className:"controlsContainer flex"},r,l,Me,Ue)))};l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(V,null)),document.getElementById("root"))},49:function(e,t,a){e.exports=a.p+"static/media/camera.299a8f67.svg"},50:function(e,t,a){e.exports=a.p+"static/media/camera-stop.85f8745d.svg"},51:function(e,t,a){e.exports=a.p+"static/media/microphone.a2374838.svg"},52:function(e,t,a){e.exports=a.p+"static/media/microphone-stop.09d0b6c2.svg"},53:function(e,t,a){e.exports=a.p+"static/media/hang-up.1b1f0dc8.svg"},54:function(e,t,a){e.exports=a.p+"static/media/fullscreen.8f5e7921.svg"},55:function(e,t,a){e.exports=a.p+"static/media/minimize.fff27c21.svg"},56:function(e,t,a){e.exports=a.p+"static/media/ringtone.0be3c651.mp3"},57:function(e,t,a){e.exports=a(129)},62:function(e,t,a){},88:function(e,t){}},[[57,1,2]]]);
//# sourceMappingURL=main.2b9d9821.chunk.js.map